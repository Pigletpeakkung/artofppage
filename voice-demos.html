<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voice Demos - Professional Voice Over Services | PegeArts</title>
    <meta name="description" content="Listen to professional voice over demos by Thanatsitt Santisamranwilai (PegeArts). Multilingual voice talent specializing in Thai and English narration, commercial work, and e-learning.">
    <meta name="keywords" content="voice over, voice demo, Thai voice talent, English voice over, narration, commercial voice, PegeArts">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Professional Voice Over Demos | PegeArts">
    <meta property="og:description" content="Experience professional-quality voice over work across multiple languages and styles by Thanatsitt Santisamranwilai.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://yoursite.com/voice-demos">
    <meta property="og:image" content="https://yoursite.com/assets/images/voice-demo-preview.jpg">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Professional Voice Over Demos | PegeArts">
    <meta name="twitter:description" content="Experience professional-quality voice over work across multiple languages and styles.">
    <meta name="twitter:image" content="https://yoursite.com/assets/images/voice-demo-preview.jpg">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://yoursite.com/voice-demos">
    
    <!-- Preconnect to external domains -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- AOS Animation Library -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#8b5cf6">
    
    <!-- iOS PWA -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="PegeArts Voice Demos">
    <link rel="apple-touch-icon" href="/assets/icons/apple-touch-icon.png">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Thanatsitt Santisamranwilai",
        "alternateName": "PegeArts",
        "jobTitle": "Professional Voice Over Artist",
        "url": "https://yoursite.com",
        "image": "https://yoursite.com/assets/images/profile.jpg",
        "sameAs": [
            "https://linkedin.com/in/yourprofile",
            "https://twitter.com/yourhandle"
        ],
        "knowsLanguage": ["Thai", "English"],
        "hasOccupation": {
            "@type": "Occupation",
            "name": "Voice Over Artist",
            "description": "Professional voice talent specializing in Thai and English narration, commercial work, and e-learning content."
        }
    }
    </script>
    
    <!-- Custom Styles -->
    <style>
        /* Voice Demo Section Styles - Light Theme */
        .waveform-bar {
            width: 4px;
            height: 60px;
            border-radius: 2px;
            animation: waveform 1.5s ease-in-out infinite;
            margin: 0 1px;
            animation-play-state: paused;
        }

        @keyframes waveform {
            0%, 100% { 
                height: 20px; 
                opacity: 0.7;
            }
            50% { 
                height: 60px; 
                opacity: 1;
            }
        }

        .mini-wave {
            width: 3px;
            border-radius: 1px;
            transition: all 0.3s ease;
            margin: 0 1px;
        }

        .voice-demo-card:hover .mini-wave {
            animation: miniWave 1s ease-in-out infinite;
        }

        @keyframes miniWave {
            0%, 100% { 
                transform: scaleY(0.5); 
                opacity: 0.6;
            }
            50% { 
                transform: scaleY(1.2); 
                opacity: 1;
            }
        }

        /* Custom range slider - Light Theme */
        input[type="range"] {
            -webkit-appearance: none;
            background: transparent;
            cursor: pointer;
        }

        input[type="range"]::-webkit-slider-track {
            background: rgba(0, 0, 0, 0.1);
            height: 4px;
            border-radius: 2px;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            background: linear-gradient(45deg, #8b5cf6, #ec4899);
            height: 16px;
            width: 16px;
            border-radius: 50%;
            cursor: pointer;
        }

        input[type="range"]::-moz-range-track {
            background: rgba(0, 0, 0, 0.1);
            height: 4px;
            border-radius: 2px;
            border: none;
        }

        input[type="range"]::-moz-range-thumb {
            background: linear-gradient(45deg, #8b5cf6, #ec4899);
            height: 16px;
            width: 16px;
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }

        /* Playing state - Light Theme */
        .voice-demo-card.playing {
            background: rgba(139, 92, 246, 0.1) !important;
            border-color: rgba(139, 92, 246, 0.3) !important;
            transform: scale(1.02);
            box-shadow: 0 10px 25px rgba(139, 92, 246, 0.2);
        }

        .voice-demo-card.playing .mini-wave {
            animation: miniWave 0.8s ease-in-out infinite;
        }

        /* Loading state */
        .loading {
            position: relative;
            overflow: hidden;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(139, 92, 246, 0.1), transparent);
            animation: loading 1.5s infinite;
        }

        @keyframes loading {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        /* Preview limit indicator */
        .preview-limit {
            position: relative;
        }

        .preview-limit::before {
            content: 'DEMO';
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(239, 68, 68, 0.9);
            color: white;
            padding: 4px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: bold;
            z-index: 10;
            box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
        }

        /* Modal styles */
        .modal-backdrop {
            backdrop-filter: blur(8px);
            animation: fadeIn 0.3s ease-out;
        }

        .modal-content {
            animation: slideUp 0.3s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { 
                opacity: 0; 
                transform: translateY(20px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }

        /* Light theme gradients */
        .light-gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .light-card-bg {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }

        .light-waveform-bg {
            background: rgba(0, 0, 0, 0.05);
        }

        /* Security notice - Light Theme */
        .security-notice {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.05), rgba(245, 101, 101, 0.08));
            border-left: 4px solid #ef4444;
        }

        /* Application-specific styles */
        .app-loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            color: white;
        }

        .app-loading .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10000;
            pointer-events: none;
        }

        .toast {
            background: white;
            border-radius: 12px;
            padding: 16px 20px;
            margin-bottom: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            border-left: 4px solid;
            transform: translateX(400px);
            opacity: 0;
            transition: all 0.3s ease;
            pointer-events: auto;
            max-width: 400px;
        }

        .toast.show {
            transform: translateX(0);
            opacity: 1;
        }

        .toast.success { border-left-color: #10b981; }
        .toast.error { border-left-color: #ef4444; }
        .toast.warning { border-left-color: #f59e0b; }
        .toast.info { border-left-color: #3b82f6; }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .waveform-bar {
                width: 3px;
                height: 40px;
                margin: 0 0.5px;
            }
            
            @keyframes waveform {
                0%, 100% { height: 15px; }
                50% { height: 40px; }
            }
            
            .voice-demo-card {
                padding: 1rem;
            }

            .toast-container {
                top: 10px;
                right: 10px;
                left: 10px;
            }

            .toast {
                max-width: none;
            }
        }

        /* Animation classes */
        .animate-fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        .animate-slide-up {
            animation: slideUp 0.5s ease-out;
        }

        .animate-scale-in {
            animation: scaleIn 0.3s ease-out;
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Skip to content link */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 6px;
            background: #8b5cf6;
            color: white;
            padding: 8px;
            border-radius: 4px;
            text-decoration: none;
            z-index: 100;
            transition: top 0.3s;
        }

        .skip-link:focus {
            top: 6px;
        }

        /* Dark mode support */
        @media (prefers-color-scheme: dark) {
            .light-card-bg {
                background: rgba(30, 30, 30, 0.95);
                color: white;
            }
            
            .light-waveform-bg {
                background: rgba(255, 255, 255, 0.05);
            }
        }

        /* High contrast mode support */
        @media (prefers-contrast: high) {
            .voice-demo-card {
                border: 2px solid;
            }
            
            .waveform-bar {
                opacity: 1 !important;
            }
        }

        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            .waveform-bar,
            .mini-wave,
            .loading::after,
            .toast,
            .modal-backdrop,
            .modal-content {
                animation: none !important;
                transition: none !important;
            }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900">
    <!-- Skip to content link for accessibility -->
    <a href="#main-content" class="skip-link" id="skip-to-content">Skip to main content</a>

    <!-- Application Loading Screen -->
    <div id="app-loading" class="app-loading">
        <div class="spinner"></div>
        <h2 class="text-2xl font-bold mb-2">Loading PegeArts</h2>
        <p class="text-white/80">Preparing your voice demo experience...</p>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Navigation -->
    <nav id="main-navigation" class="fixed top-0 w-full bg-white/90 backdrop-blur-md z-50 border-b border-gray-200 shadow-sm">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <a href="#" class="text-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent">
                    PegeArts
                </a>
                <div class="hidden md:flex space-x-8">
                    <a href="#home" class="nav-link text-gray-700 hover:text-purple-600 transition-colors" data-section="home">Home</a>
                    <a href="#about" class="nav-link text-gray-700 hover:text-purple-600 transition-colors" data-section="about">About</a>
                    <a href="#voice-demos" class="nav-link text-purple-600 font-medium" data-section="voice-demos">
                        <i class="fas fa-microphone mr-2"></i>Voice Demos
                    </a>
                    <a href="#services" class="nav-link text-gray-700 hover:text-purple-600 transition-colors" data-section="services">Services</a>
                    <a href="#contact" class="nav-link text-gray-700 hover:text-purple-600 transition-colors" data-section="contact">Contact</a>
                </div>
                
                <!-- Mobile menu button -->
                <button id="mobile-menu-btn" class="md:hidden p-2 text-gray-700 hover:text-purple-600 transition-colors">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
        </div>
        
        <!-- Mobile menu -->
        <div id="mobile-menu" class="md:hidden bg-white/95 backdrop-blur-md border-t border-gray-200 hidden">
            <div class="container mx-auto px-4 py-4 space-y-4">
                <a href="#home" class="nav-link block text-gray-700 hover:text-purple-600 transition-colors" data-section="home">Home</a>
                <a href="#about" class="nav-link block text-gray-700 hover:text-purple-600 transition-colors" data-section="about">About</a>
                <a href="#voice-demos" class="nav-link block text-purple-600 font-medium" data-section="voice-demos">
                    <i class="fas fa-microphone mr-2"></i>Voice Demos
                </a>
                <a href="#services" class="nav-link block text-gray-700 hover:text-purple-600 transition-colors" data-section="services">Services</a>
                <a href="#contact" class="nav-link block text-gray-700 hover:text-purple-600 transition-colors" data-section="contact">Contact</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="main-content">
        <!-- Voice Demo Section -->
        <section id="voice-demos" class="py-20 light-gradient-bg relative overflow-hidden mt-16">
            <!-- Background Effects -->
            <div class="absolute inset-0">
                <div class="absolute top-20 left-10 w-72 h-72 bg-white/10 rounded-full blur-3xl animate-pulse"></div>
                <div class="absolute bottom-20 right-10 w-96 h-96 bg-white/5 rounded-full blur-3xl animate-pulse delay-1000"></div>
            </div>
            
            <div class="container mx-auto px-4 relative z-10">
                <!-- Section Header -->
                <div class="text-center mb-16" data-aos="fade-up">
                    <div class="inline-flex items-center px-6 py-3 bg-white/20 backdrop-blur-sm rounded-full mb-6 border border-white/30">
                        <i class="fas fa-microphone text-white mr-2"></i>
                        <span class="text-white text-sm font-medium">Professional Voice Samples</span>
                    </div>
                    
                    <h1 class="text-5xl md:text-6xl font-bold mb-6 text-white drop-shadow-lg">
                        Voice Demos
                    </h1>
                    
                    <p class="text-xl text-white/90 max-w-3xl mx-auto leading-relaxed mb-8 drop-shadow">
                        Experience professional-quality voice over work across multiple languages and styles. 
                        From narrative storytelling to commercial presentations, discover the versatility of my voice.
                    </p>

                    <!-- Security Notice -->
                    <div class="security-notice max-w-2xl mx-auto p-6 rounded-xl mb-8 bg-white/10 backdrop-blur-sm border border-white/20" data-aos="fade-up" data-aos-delay="100">
                        <div class="flex items-start space-x-3">
                            <i class="fas fa-shield-alt text-red-300 mt-1 text-lg"></i>
                            <div class="text-left">
                                <h2 class="font-semibold text-white mb-2">Protected Content</h2>
                                <p class="text-sm text-white/80">
                                    These demos are for evaluation purposes only. Full, uncompressed versions are available for licensed use. 
                                    Contact me for commercial licensing and custom recordings.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Voice Player Interface -->
                <div class="max-w-6xl mx-auto">
                    <!-- Main Player -->
                    <div class="light-card-bg rounded-3xl p-8 mb-12 border border-white/30 shadow-2xl preview-limit" data-aos="fade-up" data-aos-delay="200">
                        <div class="flex flex-col lg:flex-row items-center gap-8">
                            <!-- Waveform Visualization -->
                            <div class="flex-1 w-full">
                                <div class="light-waveform-bg rounded-2xl p-6 mb-6 border border-gray-200">
                                    <div id="waveform-container" class="h-32 w-full">
                                        <!-- Animated waveform placeholder -->
                                        <div class="flex items-center justify-center h-full space-x-1">
                                            <div class="waveform-bar bg-gradient-to-t from-purple-600 to-purple-400"></div>
                                            <div class="waveform-bar bg-gradient-to-t from-blue-600 to-blue-400" style="animation-delay: 0.1s"></div>
                                            <div class="waveform-bar bg-gradient-to-t from-pink-600 to-pink-400" style="animation-delay: 0.2s"></div>
                                            <div class="waveform-bar bg-gradient-to-t from-purple-600 to-purple-400" style="animation-delay: 0.3s"></div>
                                            <div class="waveform-bar bg-gradient-to-t from-blue-600 to-blue-400" style="animation-delay: 0.4s"></div>
                                            <div class="waveform-bar bg-gradient-to-t from-pink-600 to-pink-400" style="animation-delay: 0.5s"></div>
                                            <div class="waveform-bar bg-gradient-to-t from-purple-600 to-purple-400" style="animation-delay: 0.6s"></div>
                                            <div class="waveform-bar bg-gradient-to-t from-blue-600 to-blue-400" style="animation-delay: 0.7s"></div>
                                            <div class="waveform-bar bg-gradient-to-t from-pink-600 to-pink-400" style="animation-delay: 0.8s"></div>
                                            <div class="waveform-bar bg-gradient-to-t from-purple-600 to-purple-400" style="animation-delay: 0.9s"></div>
                                            <div class="waveform-bar bg-gradient-to-t from-blue-600 to-blue-400" style="animation-delay: 1s"></div>
                                            <div class="waveform-bar bg-gradient-to-t from-pink-600 to-pink-400" style="animation-delay: 1.1s"></div>
                                        </div>
                                    </div>
                                    
                                    <!-- Progress Bar -->
                                    <div class="mt-4">
                                        <div class="flex justify-between text-xs text-gray-600 mb-2">
                                            <span id="current-time">0:00</span>
                                            <span id="demo-limit" class="text-red-600 font-semibold">DEMO VERSION - 60s LIMIT</span>
                                            <span id="total-time">0:00</span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-2 cursor-pointer" id="progress-container">
                                            <div id="progress-bar" class="bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Current Track Info -->
                                <div class="text-center">
                                    <h3 id="current-track-title" class="text-3xl font-bold text-gray-900 mb-3">Select a Voice Demo</h3>
                                    <p id="current-track-description" class="text-gray-600 text-lg">Choose from the samples below to begin listening</p>
                                    <div id="current-track-meta" class="mt-4 hidden">
                                        <div class="flex justify-center space-x-4 text-sm">
                                            <span class="px-4 py-2 bg-purple-100 text-purple-700 rounded-full font-medium" id="track-language">Language</span>
                                            <span class="px-4 py-2 bg-blue-100 text-blue-700 rounded-full font-medium" id="track-type">Type</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Player Controls -->
                            <div class="flex flex-col items-center space-y-6">
                                <div class="flex items-center space-x-4">
                                    <button id="prev-btn" class="p-4 bg-gray-100 hover:bg-gray-200 rounded-full transition-all duration-300 text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl" aria-label="Previous track">
                                        <i class="fas fa-step-backward text-lg"></i>
                                    </button>
                                    
                                    <button id="play-pause-btn" class="p-6 bg-gradient-to-br from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 rounded-full transition-all duration-300 text-white shadow-2xl hover:shadow-purple-500/30 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed" aria-label="Play/Pause">
                                        <i id="play-pause-icon" class="fas fa-play text-2xl"></i>
                                    </button>
                                    
                                    <button id="next-btn" class="p-4 bg-gray-100 hover:bg-gray-200 rounded-full transition-all duration-300 text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl" aria-label="Next track">
                                        <i class="fas fa-step-forward text-lg"></i>
                                    </button>
                                </div>
                                
                                <!-- Volume Control -->
                                <div class="flex items-center space-x-3 bg-gray-50 px-4 py-2 rounded-full">
                                    <i class="fas fa-volume-down text-gray-500"></i>
                                    <input type="range" id="volume-slider" min="0" max="100" value="80" class="w-24 accent-purple-500" aria-label="Volume control">
                                    <i class="fas fa-volume-up text-gray-500"></i>
                                </div>
                                
                                <!-- Contact for Full Version Button -->
                                <button id="contact-btn" class="px-8 py-4 bg-green-600 hover:bg-green-700 rounded-xl text-white font-semibold transition-all duration-300 hover:scale-105 shadow-lg hover:shadow-green-500/30 disabled:opacity-50 disabled:cursor-not-allowed">
                                    <i class="fas fa-envelope mr-2"></i>
                                    Get Full Version
                                </button>

                                <!-- Quick Actions -->
                                <div class="flex space-x-3">
                                    <button id="info-btn" class="p-3 bg-blue-50 hover:bg-blue-100 rounded-lg text-blue-600 transition-all hover:scale-105 disabled:opacity-50" title="Track Information" aria-label="Track information">
                                        <i class="fas fa-info text-sm"></i>
                                    </button>
                                    <button id="share-btn" class="p-3 bg-purple-50 hover:bg-purple-100 rounded-lg text-purple-600 transition-all hover:scale-105 disabled:opacity-50" title="Share Demo" aria-label="Share demo">
                                        <i class="fas fa-share text-sm"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Voice Demo Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-16" id="voice-demos-grid">
                        <!-- Demo Card 1: Thai Narrative -->
                        <article class="voice-demo-card light-card-bg rounded-2xl p-8 border border-gray-200 hover:border-purple-300 hover:shadow-xl transition-all duration-300 cursor-pointer group shadow-lg" 
                                 data-src="assets/demo/voice/act/thanattsitt-2033447-tha-4d5m7gd2g.mp3"
                                 data-fallback="https://raw.githubusercontent.com/Pigletpeakkung/artofppage/main/assets/demo/voice/act/thanattsitt-2033447-tha-4d5m7gd2g.mp3"
                                 data-title="Thai Professional Narrative"
                                 data-description="Clear, articulate Thai narration perfect for documentaries, educational content, and corporate presentations. Features proper pacing and engaging delivery."
                                 data-duration="2:15"
                                 data-language="Thai"
                                 data-type="Narrative"
                                 data-aos="fade-up" data-aos-delay="300">
                            
                            <div class="flex items-center justify-between mb-6">
                                <div class="flex items-center space-x-4">
                                    <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center shadow-lg">
                                        <i class="fas fa-microphone text-white text-xl"></i>
                                    </div>
                                    <div>
                                        <h3 class="text-xl font-bold text-gray-900 group-hover:text-purple-600 transition-colors">Thai Professional Narrative</h3>
                                        <p class="text-gray-600">Documentary & Educational</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="text-xs text-gray-500 uppercase tracking-wide">Duration</div>
                                    <div class="text-lg font-bold text-gray-900">2:15</div>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between mb-6">
                                <div class="flex space-x-3">
                                    <span class="px-4 py-2 bg-purple-100 text-purple-700 rounded-full text-sm font-medium">Thai</span>
                                    <span class="px-4 py-2 bg-blue-100 text-blue-700 rounded-full text-sm font-medium">Narrative</span>
                                </div>
                                <button class="p-3 bg-gray-100 hover:bg-purple-100 rounded-xl transition-all group-hover:scale-110 hover:shadow-lg" aria-label="Play Thai narrative demo">
                                    <i class="fas fa-play text-purple-600"></i>
                                </button>
                            </div>
                            
                            <p class="text-gray-600 leading-relaxed mb-6">
                                Professional Thai narration showcasing clear articulation, proper pacing, and engaging delivery. 
                                Perfect for documentaries, educational content, and corporate presentations requiring authentic Thai voice work.
                            </p>
                            
                            <!-- Waveform Preview -->
                            <div class="flex items-center space-x-1 h-10 bg-gray-50 rounded-lg p-2" aria-hidden="true">
                                <div class="mini-wave bg-purple-400" style="height: 25%"></div>
                                <div class="mini-wave bg-purple-500" style="height: 45%"></div>
                                <div class="mini-wave bg-purple-400" style="height: 65%"></div>
                                <div class="mini-wave bg-purple-600" style="height: 85%"></div>
                                <div class="mini-wave bg-purple-500" style="height: 35%"></div>
                                <div class="mini-wave bg-purple-600" style="height: 75%"></div>
                                <div class="mini-wave bg-purple-400" style="height: 55%"></div>
                                <div class="mini-wave bg-purple-600" style="height: 95%"></div>
                                <div class="mini-wave bg-purple-500" style="height: 45%"></div>
                                <div class="mini-wave bg-purple-400" style="height: 35%"></div>
                                <div class="mini-wave bg-purple-500" style="height: 60%"></div>
                                <div class="mini-wave bg-purple-400" style="height: 40%"></div>
                                <div class="mini-wave bg-purple-600" style="height: 80%"></div>
                                <div class="mini-wave bg-purple-500" style="height: 50%"></div>
                                <div class="mini-wave bg-purple-400" style="height: 30%"></div>
                            </div>
                        </article>

                        <!-- Demo Card 2: Hobby Freetalk -->
                        <article class="voice-demo-card light-card-bg rounded-2xl p-8 border border-gray-200 hover:border-blue-300 hover:shadow-xl transition-all duration-300 cursor-pointer group shadow-lg" 
                                 data-src="assets/demo/voice/act/Thanattsitt-Hobby-Freetalk.mp3"
                                 data-fallback="https://raw.githubusercontent.com/Pigletpeakkung/artofppage/main/assets/demo/voice/act/Thanattsitt-Hobby-Freetalk.mp3"
                                 data-title="Conversational Hobby Discussion"
                                 data-description="Natural, friendly conversation about personal interests and hobbies. Demonstrates versatility between formal and casual speaking styles in both Thai and English."
                                 data-duration="3:20"
                                 data-language="Thai/English"
                                 data-type="Conversational"
                                 data-aos="fade-up" data-aos-delay="400">
                            
                            <div class="flex items-center justify-between mb-6">
                                <div class="flex items-center space-x-4">
                                    <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-2xl flex items-center justify-center shadow-lg">
                                        <i class="fas fa-comments text-white text-xl"></i>
                                    </div>
                                    <div>
                                        <h3 class="text-xl font-bold text-gray-900 group-hover:text-blue-600 transition-colors">Conversational Style</h3>
                                        <p class="text-gray-600">Hobby & Lifestyle Discussion</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="text-xs text-gray-500 uppercase tracking-wide">Duration</div>
                                    <div class="text-lg font-bold text-gray-900">3:20</div>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between mb-6">
                                <div class="flex space-x-3">
                                    <span class="px-4 py-2 bg-blue-100 text-blue-700 rounded-full text-sm font-medium">Bilingual</span>
                                    <span class="px-4 py-2 bg-cyan-100 text-cyan-700 rounded-full text-sm font-medium">Casual</span>
                                </div>
                                <button class="p-3 bg-gray-100 hover:bg-blue-100 rounded-xl transition-all group-hover:scale-110 hover:shadow-lg" aria-label="Play conversational demo">
                                    <i class="fas fa-play text-blue-600"></i>
                                </button>
                            </div>
                            
                            <p class="text-gray-600 leading-relaxed mb-6">
                                Natural conversational delivery discussing personal interests and hobbies. Perfect for podcasts, 
                                interviews, and content requiring an authentic, relatable speaking style that connects with audiences.
                            </p>
                            
                            <!-- Waveform Preview -->
                            <div class="flex items-center space-x-1 h-10 bg-gray-50 rounded-lg p-2" aria-hidden="true">
                                <div class="mini-wave bg-blue-400" style="height: 35%"></div>
                                <div class="mini-wave bg-blue-500" style="height: 55%"></div>
                                <div class="mini-wave bg-blue-400" style="height: 75%"></div>
                                <div class="mini-wave bg-blue-600" style="height: 45%"></div>
                                <div class="mini-wave bg-blue-500" style="height: 85%"></div>
                                <div class="mini-wave bg-blue-400" style="height: 65%"></div>
                                <div class="mini-wave bg-blue-600" style="height: 95%"></div>
                                <div class="mini-wave bg-blue-500" style="height: 40%"></div>
                                <div class="mini-wave bg-blue-400" style="height: 60%"></div>
                                <div class="mini-wave bg-blue-600" style="height: 80%"></div>
                                <div class="mini-wave bg-blue-500" style="height: 50%"></div>
                                <div class="mini-wave bg-blue-400" style="height: 70%"></div>
                                <div class="mini-wave bg-blue-600" style="height: 90%"></div>
                                <div class="mini-wave bg-blue-500" style="height: 45%"></div>
                                <div class="mini-wave bg-blue-400" style="height: 35%"></div>
                            </div>
                        </article>
                    </div>

                    <!-- Professional Services Info -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-16">
                        <div class="text-center bg-white/80 backdrop-blur-sm rounded-2xl p-8 border border-white/50 shadow-lg" data-aos="fade-up" data-aos-delay="600">
                            <div class="w-20 h-20 bg-gradient-to-br from-purple-500 to-pink-500 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-lg">
                                <i class="fas fa-language text-white text-2xl"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-4">Multilingual Expertise</h3>
                            <p class="text-gray-600 leading-relaxed">Professional delivery in both Thai and English with cultural nuance, authentic pronunciation, and natural flow that resonates with native speakers.</p>
                        </div>
                        
                        <div class="text-center bg-white/80 backdrop-blur-sm rounded-2xl p-8 border border-white/50 shadow-lg" data-aos="fade-up" data-aos-delay="700">
                            <div class="w-20 h-20 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-lg">
                                <i class="fas fa-broadcast-tower text-white text-2xl"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-4">Studio Quality</h3>
                            <p class="text-gray-600 leading-relaxed">Professional recording equipment in acoustically treated environment ensuring crystal-clear audio with industry-standard specifications and delivery formats.</p>
                        </div>
                        
                        <div class="text-center bg-white/80 backdrop-blur-sm rounded-2xl p-8 border border-white/50 shadow-lg" data-aos="fade-up" data-aos-delay="800">
                            <div class="w-20 h-20 bg-gradient-to-br from-green-500 to-emerald-500 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-lg">
                                <i class="fas fa-clock text-white text-2xl"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-4">Quick Turnaround</h3>
                            <p class="text-gray-600 leading-relaxed">Fast, reliable delivery without compromising quality. Professional project management ensures your deadlines are met with attention to every detail.</p>
                        </div>
                    </div>

                    <!-- Call to Action -->
                    <div class="bg-gradient-to-r from-purple-600/90 to-pink-600/90 backdrop-blur-lg rounded-3xl p-12 border border-white/30 text-center shadow-2xl" data-aos="fade-up" data-aos-delay="900">
                        <h3 class="text-4xl font-bold text-white mb-6 drop-shadow">Ready to Work Together?</h3>
                        <p class="text-xl text-white/90 mb-8 max-w-3xl mx-auto leading-relaxed drop-shadow">
                            These demos represent just a sample of what's possible. Contact me to discuss your specific project needs, 
                            get full-quality versions, or request custom voice samples tailored to your brand and audience.
                        </p>
                        <div class="flex flex-col sm:flex-row gap-6 justify-center">
                            <button id="main-contact-btn" class="px-10 py-5 bg-white text-purple-600 hover:bg-gray-50 rounded-xl font-bold text-lg transition-all duration-300 hover:scale-105 shadow-xl hover:shadow-2xl">
                                <i class="fas fa-envelope mr-3"></i>
                                Start Your Project
                            </button>
                            <a href="#services" class="px-10 py-5 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-xl text-white font-bold text-lg transition-all duration-300 hover:scale-105 border border-white/30 shadow-xl">
                                <i class="fas fa-list mr-3"></i>
                                View Services & Rates
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Hidden Audio Element -->
            <audio id="voice-player" preload="metadata" aria-hidden="true"></audio>
        </section>
    </main>

    <!-- Comprehensive JavaScript Application -->
    <script>
        // Global configuration and environment detection
        const CONFIG = {
            APP_NAME: 'PegeArts Voice Demos',
            APP_VERSION: '1.0.0',
            DEBUG: window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1',
            API_BASE_URL: 'https://api.yoursite.com',
            ANALYTICS_ENDPOINT: 'https://analytics.yoursite.com/track',
            CONTACT_EMAIL: 'thanattsitt.info@yahoo.co.uk',
            DEBOUNCE_DELAY: 300,
            ANIMATION_DURATION: 300,
            TOAST_DURATION: 5000,
            VOICE_PREVIEW_LIMIT: 60, // seconds
            MAX_RETRIES: 3,
            RETRY_DELAY: 1000
        };

        // Application State Management
        const AppState = {
            isInitialized: false,
            isLoading: true,
            currentTheme: 'light',
            isMobileMenuOpen: false,
            activeModal: null,
            voicePlayer: null,
            currentTrack: 0,
            isPlaying: false,
            volume: 0.8,
            errors: [],
            performanceMetrics: {},
            cache: new Map(),
            timers: new Map(),
            observers: new Map(),
            eventListeners: new Map()
        };

        // Utility Functions
        const Utils = {
            // DOM utilities
            getElement: (selector) => document.querySelector(selector),
            getElements: (selector) => document.querySelectorAll(selector),
            
            // Time utilities
            delay: (ms) => new Promise(resolve => setTimeout(resolve, ms)),
                        // Throttle function calls
            throttle: (func, limit) => {
                let inThrottle;
                return function() {
                    const args = arguments;
                    const context = this;
                    if (!inThrottle) {
                        func.apply(context, args);
                        inThrottle = true;
                        setTimeout(() => inThrottle = false, limit);
                    }
                }
            },

            // Debounce function calls
            debounce: (func, wait, immediate) => {
                let timeout;
                return function executedFunction() {
                    const context = this;
                    const args = arguments;
                    const later = function() {
                        timeout = null;
                        if (!immediate) func.apply(context, args);
                    };
                    const callNow = immediate && !timeout;
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                    if (callNow) func.apply(context, args);
                };
            },

            // Format time in MM:SS format
            formatTime: (seconds) => {
                if (isNaN(seconds)) return '0:00';
                const mins = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                return `${mins}:${secs.toString().padStart(2, '0')}`;
            },

            // Generate unique IDs
            generateId: () => `_${Math.random().toString(36).substr(2, 9)}`,

            // Sanitize HTML
            sanitizeHtml: (str) => {
                const temp = document.createElement('div');
                temp.textContent = str;
                return temp.innerHTML;
            },

            // Check if element is in viewport
            isInViewport: (element) => {
                const rect = element.getBoundingClientRect();
                return (
                    rect.top >= 0 &&
                    rect.left >= 0 &&
                    rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
                    rect.right <= (window.innerWidth || document.documentElement.clientWidth)
                );
            },

            // Local storage with error handling
            storage: {
                get: (key, defaultValue = null) => {
                    try {
                        const item = localStorage.getItem(key);
                        return item ? JSON.parse(item) : defaultValue;
                    } catch (error) {
                        console.warn(`Failed to get ${key} from localStorage:`, error);
                        return defaultValue;
                    }
                },
                set: (key, value) => {
                    try {
                        localStorage.setItem(key, JSON.stringify(value));
                        return true;
                    } catch (error) {
                        console.warn(`Failed to set ${key} in localStorage:`, error);
                        return false;
                    }
                },
                remove: (key) => {
                    try {
                        localStorage.removeItem(key);
                        return true;
                    } catch (error) {
                        console.warn(`Failed to remove ${key} from localStorage:`, error);
                        return false;
                    }
                }
            }
        };

        // Toast Notification System
        class ToastManager {
            constructor() {
                this.container = this.createContainer();
                this.toasts = [];
            }

            createContainer() {
                let container = Utils.getElement('#toast-container');
                if (!container) {
                    container = document.createElement('div');
                    container.id = 'toast-container';
                    container.className = 'toast-container';
                    document.body.appendChild(container);
                }
                return container;
            }

            show(type = 'info', message, duration = CONFIG.TOAST_DURATION, options = {}) {
                const toast = this.createToast(type, message, options);
                this.container.appendChild(toast);
                this.toasts.push(toast);

                // Animate in
                requestAnimationFrame(() => {
                    toast.classList.add('show');
                });

                // Auto remove
                if (duration > 0) {
                    setTimeout(() => {
                        this.removeToast(toast);
                    }, duration);
                }

                return toast;
            }

            createToast(type, message, options) {
                const toast = document.createElement('div');
                toast.className = `toast ${type}`;
                
                const icons = {
                    success: 'fas fa-check-circle',
                    error: 'fas fa-exclamation-circle',
                    warning: 'fas fa-exclamation-triangle',
                    info: 'fas fa-info-circle'
                };

                toast.innerHTML = `
                    <div class="flex items-center">
                        <i class="${icons[type]} text-lg mr-3"></i>
                        <div class="flex-1">
                            <div class="font-medium">${Utils.sanitizeHtml(message)}</div>
                            ${options.description ? `<div class="text-sm opacity-80 mt-1">${Utils.sanitizeHtml(options.description)}</div>` : ''}
                        </div>
                        ${options.actionText ? `<button class="ml-4 text-sm font-medium underline hover:no-underline" onclick="(${options.actionHandler.toString()})()">${options.actionText}</button>` : ''}
                        <button class="ml-4 text-lg hover:opacity-70" onclick="this.closest('.toast').remove()" aria-label="Close notification"></button>
                    </div>
                `;

                return toast;
            }

            removeToast(toast) {
                toast.classList.remove('show');
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                    this.toasts = this.toasts.filter(t => t !== toast);
                }, 300);
            }

            clear() {
                this.toasts.forEach(toast => this.removeToast(toast));
            }
        }

        // Modal Management System
        class ModalManager {
            static activeModal = null;

            static show({ title, content, actions = [], className = '' }) {
                this.close(); // Close any existing modal

                const modal = document.createElement('div');
                modal.className = `modal-backdrop fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 ${className}`;
                
                const actionsHtml = actions.map(action => {
                    const clickHandler = action.action === 'close' ? 'ModalManager.close()' :
                                       typeof action.action === 'function' ? `(${action.action.toString()})()` :
                                       action.action;
                    
                    return `<button onclick="${clickHandler}" class="rounded-lg font-medium transition-all duration-200 hover:scale-105 ${action.class || 'bg-gray-200 hover:bg-gray-300 text-gray-800 px-6 py-3'}">${action.text}</button>`;
                }).join('');

                modal.innerHTML = `
                    <div class="modal-content bg-white rounded-3xl max-w-4xl w-full max-h-[95vh] overflow-y-auto shadow-2xl">
                        <div class="p-8">
                            <div class="flex items-center justify-between mb-6">
                                <h3 class="text-2xl font-bold text-gray-900">${title}</h3>
                                <button onclick="ModalManager.close()" 
                                        class="text-gray-400 hover:text-gray-600 text-3xl leading-none w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors"
                                        aria-label="Close modal">
                                    
                                </button>
                            </div>
                            <div class="mb-8">
                                ${content}
                            </div>
                            ${actions.length > 0 ? `
                                <div class="flex flex-col sm:flex-row gap-4 sm:justify-end">
                                    ${actionsHtml}
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;

                document.body.appendChild(modal);
                this.activeModal = modal;

                // Event listeners
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) this.close();
                });

                // Escape key handler
                const escapeHandler = (e) => {
                    if (e.key === 'Escape') {
                        this.close();
                        document.removeEventListener('keydown', escapeHandler);
                    }
                };
                document.addEventListener('keydown', escapeHandler);

                // Focus management
                const firstFocusable = modal.querySelector('button, input, textarea, select, a[href]');
                if (firstFocusable) firstFocusable.focus();

                return modal;
            }

            static close() {
                if (this.activeModal) {
                    this.activeModal.classList.add('opacity-0');
                    setTimeout(() => {
                        if (this.activeModal && this.activeModal.parentNode) {
                            this.activeModal.parentNode.removeChild(this.activeModal);
                        }
                        this.activeModal = null;
                    }, 300);
                }
            }
        }

        // Navigation Management
        class NavigationManager {
            constructor() {
                this.mobileMenuBtn = Utils.getElement('#mobile-menu-btn');
                this.mobileMenu = Utils.getElement('#mobile-menu');
                this.navLinks = Utils.getElements('.nav-link');
                
                this.bindEvents();
            }

            bindEvents() {
                // Mobile menu toggle
                if (this.mobileMenuBtn) {
                    this.mobileMenuBtn.addEventListener('click', () => {
                        this.toggleMobileMenu();
                    });
                }

                // Navigation links
                this.navLinks.forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const section = link.dataset.section;
                        if (section) {
                            this.navigateToSection(section);
                        }
                        this.closeMobileMenu();
                    });
                });

                // Close mobile menu on resize
                window.addEventListener('resize', Utils.throttle(() => {
                    if (window.innerWidth >= 768) {
                        this.closeMobileMenu();
                    }
                }, 250));
            }

            toggleMobileMenu() {
                AppState.isMobileMenuOpen = !AppState.isMobileMenuOpen;
                this.updateMobileMenu();
            }

            closeMobileMenu() {
                AppState.isMobileMenuOpen = false;
                this.updateMobileMenu();
            }

            updateMobileMenu() {
                if (this.mobileMenu) {
                    if (AppState.isMobileMenuOpen) {
                        this.mobileMenu.classList.remove('hidden');
                        this.mobileMenuBtn.innerHTML = '<i class="fas fa-times text-xl"></i>';
                    } else {
                        this.mobileMenu.classList.add('hidden');
                        this.mobileMenuBtn.innerHTML = '<i class="fas fa-bars text-xl"></i>';
                    }
                }
            }

            navigateToSection(sectionId) {
                const section = Utils.getElement(`#${sectionId}`);
                if (section) {
                    const navHeight = Utils.getElement('#main-navigation')?.offsetHeight || 0;
                    const targetPosition = section.offsetTop - navHeight - 20;
                    
                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });

                    // Update active nav link
                    this.updateActiveNavLink(sectionId);
                }
            }

            updateActiveNavLink(activeSection) {
                this.navLinks.forEach(link => {
                    if (link.dataset.section === activeSection) {
                        link.classList.add('text-purple-600', 'font-medium');
                        link.classList.remove('text-gray-700');
                    } else {
                        link.classList.remove('text-purple-600', 'font-medium');
                        link.classList.add('text-gray-700');
                    }
                });
            }
        }

        // Enhanced Voice Demo Player
        class EnhancedVoiceDemoPlayer {
            constructor() {
                this.currentTrack = 0;
                this.tracks = [];
                this.isPlaying = false;
                this.isLoading = false;
                this.previewLimit = CONFIG.VOICE_PREVIEW_LIMIT;
                this.limitReached = false;
                this.retryCount = 0;
                this.loadStartTime = 0;
                
                this.initializeElements();
                this.initializeTracks();
                this.bindEvents();
                this.setVolume(AppState.volume);
                this.updateUI();
                
                console.log(' Enhanced Voice Demo Player initialized');
            }
            
            initializeElements() {
                this.elements = {
                    audio: Utils.getElement('#voice-player'),
                    playPauseBtn: Utils.getElement('#play-pause-btn'),
                    playPauseIcon: Utils.getElement('#play-pause-icon'),
                    prevBtn: Utils.getElement('#prev-btn'),
                    nextBtn: Utils.getElement('#next-btn'),
                    volumeSlider: Utils.getElement('#volume-slider'),
                    progressBar: Utils.getElement('#progress-bar'),
                    progressContainer: Utils.getElement('#progress-container'),
                    currentTimeEl: Utils.getElement('#current-time'),
                    totalTimeEl: Utils.getElement('#total-time'),
                    currentTrackTitle: Utils.getElement('#current-track-title'),
                    currentTrackDescription: Utils.getElement('#current-track-description'),
                    currentTrackMeta: Utils.getElement('#current-track-meta'),
                    trackLanguage: Utils.getElement('#track-language'),
                    trackType: Utils.getElement('#track-type'),
                    contactBtn: Utils.getElement('#contact-btn'),
                    mainContactBtn: Utils.getElement('#main-contact-btn'),
                    infoBtn: Utils.getElement('#info-btn'),
                    shareBtn: Utils.getElement('#share-btn'),
                    waveformBars: Utils.getElements('.waveform-bar')
                };

                // Validate critical elements
                if (!this.elements.audio) {
                    console.error(' Audio element not found');
                    return;
                }
            }
            
            initializeTracks() {
                const trackCards = Utils.getElements('.voice-demo-card[data-src]');
                
                trackCards.forEach((card, index) => {
                    this.tracks.push({
                        src: card.dataset.src,
                        fallback: card.dataset.fallback,
                        title: card.dataset.title,
                        description: card.dataset.description,
                        duration: card.dataset.duration,
                        language: card.dataset.language,
                        type: card.dataset.type,
                        element: card,
                        index: index
                    });
                });
                
                console.log(` Initialized ${this.tracks.length} voice demo tracks`);
            }
            
            bindEvents() {
                // Player controls
                this.elements.playPauseBtn?.addEventListener('click', () => this.togglePlay());
                this.elements.prevBtn?.addEventListener('click', () => this.previousTrack());
                this.elements.nextBtn?.addEventListener('click', () => this.nextTrack());
                this.elements.volumeSlider?.addEventListener('input', (e) => this.setVolume(e.target.value / 100));
                this.elements.contactBtn?.addEventListener('click', () => this.showContactOptions());
                this.elements.mainContactBtn?.addEventListener('click', () => this.showContactOptions());
                this.elements.infoBtn?.addEventListener('click', () => this.showTrackInfo());
                this.elements.shareBtn?.addEventListener('click', () => this.shareDemo());
                
                // Track cards
                this.tracks.forEach(track => {
                    track.element.addEventListener('click', () => this.selectTrack(track.index));
                });
                
                // Audio events
                if (this.elements.audio) {
                    this.elements.audio.addEventListener('loadstart', () => this.onLoadStart());
                    this.elements.audio.addEventListener('canplay', () => this.onCanPlay());
                    this.elements.audio.addEventListener('loadedmetadata', () => this.onLoadedMetadata());
                    this.elements.audio.addEventListener('timeupdate', () => this.onTimeUpdate());
                    this.elements.audio.addEventListener('ended', () => this.onEnded());
                    this.elements.audio.addEventListener('error', (e) => this.onError(e));
                    this.elements.audio.addEventListener('play', () => this.onPlay());
                    this.elements.audio.addEventListener('pause', () => this.onPause());
                }
                
                // Progress bar interaction
                this.elements.progressContainer?.addEventListener('click', (e) => this.seekTo(e));
                
                // Keyboard controls
                document.addEventListener('keydown', (e) => this.handleKeyboard(e));
            }
            
            async selectTrack(index) {
                if (index < 0 || index >= this.tracks.length) return;
                
                console.log(` Selecting track ${index}: ${this.tracks[index].title}`);
                
                this.limitReached = false;
                this.retryCount = 0;
                this.currentTrack = index;
                const track = this.tracks[index];
                
                this.updateTrackInfo(track);
                this.updateActiveCard();
                
                await this.loadAudio(track);
            }
            
            async loadAudio(track) {
                this.setLoading(true);
                this.loadStartTime = performance.now();
                
                try {
                    console.log(` Loading primary source: ${track.src}`);
                    
                    this.elements.audio.src = track.src;
                    await this.waitForLoad();
                    
                    console.log(` Successfully loaded: ${track.title}`);
                    
                } catch (error) {
                    console.warn(` Primary source failed, trying fallback...`, error);
                    
                    try {
                        this.elements.audio.src = track.fallback;
                        await this.waitForLoad();
                        
                        console.log(` Fallback source loaded: ${track.title}`);
                        
                    } catch (fallbackError) {
                        console.error(` Both sources failed:`, fallbackError);
                        this.handleLoadError(track);
                        return;
                    }
                }
                
                this.setLoading(false);
                
                // Track loading performance
                const loadTime = performance.now() - this.loadStartTime;
                AppState.performanceMetrics.audioLoadTime = loadTime;
                console.log(` Audio loaded in ${Math.round(loadTime)}ms`);
            }
            
            waitForLoad() {
                return new Promise((resolve, reject) => {
                    const timeout = setTimeout(() => {
                        reject(new Error('Audio load timeout'));
                    }, 15000);
                    
                    const onCanPlay = () => {
                        clearTimeout(timeout);
                        this.elements.audio.removeEventListener('canplay', onCanPlay);
                        this.elements.audio.removeEventListener('error', onError);
                        resolve();
                    };
                    
                    const onError = (e) => {
                        clearTimeout(timeout);
                        this.elements.audio.removeEventListener('canplay', onCanPlay);
                        this.elements.audio.removeEventListener('error', onError);
                        reject(new Error(`Audio load error: ${e.message || 'Unknown error'}`));
                    };
                    
                    this.elements.audio.addEventListener('canplay', onCanPlay);
                    this.elements.audio.addEventListener('error', onError);
                    this.elements.audio.load();
                });
            }

            handleLoadError(track) {
                this.setLoading(false);
                
                if (this.retryCount < CONFIG.MAX_RETRIES) {
                    this.retryCount++;
                    console.log(` Retrying load (${this.retryCount}/${CONFIG.MAX_RETRIES})...`);
                    
                    setTimeout(() => {
                        this.loadAudio(track);
                    }, CONFIG.RETRY_DELAY);
                } else {
                    ToastManager.show('error', 'Unable to load audio file. Please check your connection and try again.');
                    AppState.errors.push({
                        type: 'audio_load_failed',
                        track: track.title,
                        timestamp: Date.now()
                    });
                }
            }
            
            togglePlay() {
                if (this.isLoading) {
                    console.log(' Audio is still loading...');
                    return;
                }
                
                if (this.tracks.length === 0) {
                    ToastManager.show('warning', 'No voice demos available');
                    return;
                }
                
                if (!this.elements.audio.src) {
                    console.log(' No track loaded, selecting first track...');
                    this.selectTrack(0);
                    return;
                }
                
                if (this.limitReached) {
                    this.showPreviewLimitReached();
                    return;
                }
                
                if (this.isPlaying) {
                    this.elements.audio.pause();
                } else {
                    this.elements.audio.play().catch(error => {
                        console.error(' Play failed:', error);
                        ToastManager.show('error', 'Playback failed. Please try again.');
                    });
                }
            }
            
            previousTrack() {
                const prevIndex = this.currentTrack > 0 ? this.currentTrack - 1 : this.tracks.length - 1;
                this.selectTrack(prevIndex);
            }
            
            nextTrack() {
                const nextIndex = this.currentTrack < this.tracks.length - 1 ? this.currentTrack + 1 : 0;
                this.selectTrack(nextIndex);
            }
            
            setVolume(volume) {
                const newVolume = Math.max(0, Math.min(1, volume));
                this.elements.audio.volume = newVolume;
                this.elements.volumeSlider.value = newVolume * 100;
                AppState.volume = newVolume;
                Utils.storage.set('voice_player_volume', newVolume);
            }
            
            seekTo(event) {
                if (!this.elements.audio.duration) return;
                
                const rect = event.currentTarget.getBoundingClientRect();
                const percent = (event.clientX - rect.left) / rect.width;
                let newTime = percent * this.elements.audio.duration;
                
                if (newTime > this.previewLimit) {
                    newTime = this.previewLimit;
                    this.showPreviewLimitReached();
                }
                
                this.elements.audio.currentTime = newTime;
            }
            
            handleKeyboard(event) {
                if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA') return;
                
                switch (event.code) {
                    case 'Space':
                        event.preventDefault();
                        this.togglePlay();
                        break;
                    case 'ArrowLeft':
                        event.preventDefault();
                        this.previousTrack();
                        break;
                    case 'ArrowRight':
                        event.preventDefault();
                        this.nextTrack();
                        break;
                    case 'ArrowUp':
                        event.preventDefault();
                        this.setVolume(Math.min(1, this.elements.audio.volume + 0.1));
                        break;
                    case 'ArrowDown':
                        event.preventDefault();
                        this.setVolume(Math.max(0, this.elements.audio.volume - 0.1));
                        break;
                }
            }
            
            showContactOptions() {
                const track = this.tracks[this.currentTrack];
                const trackInfo = track ? `"${track.title}"` : 'voice demos';
                
                const subject = encodeURIComponent(`Voice Demo Inquiry: ${trackInfo}`);
                const body = encodeURIComponent(`Hi Thanatsitt,

I'm interested in the ${trackInfo} voice sample from your portfolio. 

Please provide information about:
 Full, uncompressed audio files with commercial licensing
 Custom recording rates and service packages  
 Project timeline and current availability
 Multiple format options (WAV, MP3, FLAC)
 Usage rights and licensing terms

My project details:
Project Type: [Please specify]
Target Audience: [Who will be listening?]
Intended Use: [How will the audio be used?]
Timeline: [When do you need delivery?]
Budget Range: [What's your approximate budget?]

Looking forward to collaborating with you!

Best regards`);

                ModalManager.show({
                    title: ' Get Full Voice Demo & Custom Recording',
                    content: `
                        <div class="space-y-6">
                            <p class="text-gray-700 text-lg">Ready to get professional-quality audio for your project?</p>
                            
                            <div class="bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-xl border border-blue-200">
                                <h4 class="font-bold text-blue-800 mb-3 text-lg"> What You'll Receive:</h4>
                                <ul class="text-blue-700 space-y-2">
                                    <li class="flex items-center"><i class="fas fa-check-circle text-green-500 mr-2"></i> Full, uncompressed audio files (48kHz/24-bit)</li>
                                    <li class="flex items-center"><i class="fas fa-check-circle text-green-500 mr-2"></i> Commercial usage rights & licensing</li>
                                    <li class="flex items-center"><i class="fas fa-check-circle text-green-500 mr-2"></i> Multiple formats: WAV, MP3 320kbps, FLAC</li>
                                    <li class="flex items-center"><i class="fas fa-check-circle text-green-500 mr-2"></i> Custom recordings tailored to your needs</li>
                                    <li class="flex items-center"><i class="fas fa-check-circle text-green-500 mr-2"></i> Professional consultation & direction</li>
                                    <li class="flex items-center"><i class="fas fa-check-circle text-green-500 mr-2"></i> Fast turnaround (usually 2-5 business days)</li>
                                </ul>
                            </div>
                            
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                                    <h5 class="font-semibold text-green-800 mb-2"> Email (Recommended)</h5>
                                    <p class="text-sm text-green-700 mb-3">Detailed project discussion with examples and specifications</p>
                                    <a href="mailto:${CONFIG.CONTACT_EMAIL}?subject=${subject}&body=${body}" 
                                       class="block bg-green-600 hover:bg-green-700 text-white px-4 py-3 rounded-lg text-center transition-colors font-medium">
                                        Send Detailed Inquiry
                                    </a>
                                </div>
                                
                                <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                                    <h5 class="font-semibold text-blue-800 mb-2"> Quick Contact</h5>
                                    <p class="text-sm text-blue-700 mb-3">For immediate questions and quick consultations</p>
                                    <div class="space-y-2">
                                        <button onclick="navigator.clipboard.writeText('${CONFIG.CONTACT_EMAIL}').then(() => window.ToastManager.show('success', 'Email copied: ${CONFIG.CONTACT_EMAIL}'))" 
                                                class="w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors text-sm font-medium">
                                            <i class="fas fa-copy mr-1"></i> Copy Email Address
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `,
                    actions: [
                        {
                            text: 'Close',
                            class: 'bg-gray-200 hover:bg-gray-300 text-gray-800 px-6 py-2',
                            action: 'close'
                        }
                    ]
                });
            }
            
            showTrackInfo() {
                if (!this.tracks[this.currentTrack]) return;
                
                const track = this.tracks[this.currentTrack];
                
                ModalManager.show({
                    title: ' Track Information & Specifications',
                    content: `
                        <div class="space-y-6">
                            <div class="bg-gradient-to-r from-purple-50 to-blue-50 p-6 rounded-xl border border-purple-200">
                                <h4 class="font-bold text-2xl text-gray-900 mb-3">${track.title}</h4>
                                <p class="text-gray-700 text-lg mb-4">${track.description}</p>
                                
                                <div class="grid grid-cols-2 gap-6">
                                    <div>
                                        <span class="font-semibold text-gray-800 block mb-1">Language:</span>
                                        <span class="px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-medium">${track.language}</span>
                                    </div>
                                    <div>
                                        <span class="font-semibold text-gray-800 block mb-1">Style:</span>
                                        <span class="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium">${track.type}</span>
                                    </div>
                                    <div>
                                        <span class="font-semibold text-gray-800 block mb-1">Full Duration:</span>
                                        <span class="text-gray-700 font-medium">${track.duration}</span>
                                    </div>
                                    <div>
                                        <span class="font-semibold text-gray-800 block mb-1">Preview Limit:</span>
                                        <span class="text-red-600 font-semibold">${this.previewLimit} seconds</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-amber-50 border-l-4 border-amber-400 p-5 rounded-r-xl">
                                <div class="flex items-start">
                                    <i class="fas fa-info-circle text-amber-600 text-lg mt-1 mr-3"></i>
                                    <div>
                                        <h5 class="font-bold text-amber-800 text-lg mb-2">Demo Version Notice</h5>
                                        <p class="text-amber-700 mb-3">
                                            This preview is limited to ${this.previewLimit} seconds to protect intellectual property 
                                            while giving you an excellent sense of voice quality, tone, and delivery style.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `,
                    actions: [
                        {
                            text: 'Get Full Version',
                            class: 'bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-6 py-3 font-semibold',
                            action: () => { ModalManager.close(); this.showContactOptions(); }
                        },
                        {
                            text: 'Close',
                            class: 'bg-gray-200 hover:bg-gray-300 text-gray-800 px-6 py-3',
                            action: 'close'
                        }
                    ]
                });
            }
            
            shareDemo() {
                const track = this.tracks[this.currentTrack];
                if (!track) return;
                
                const shareData = {
                    title: `${track.title} - Voice Demo by PegeArts`,
                    text: `Listen to this professional voice demo: ${track.description}`,
                    url: `${window.location.href}#demo-${this.currentTrack}`
                };
                
                if (navigator.share) {
                    navigator.share(shareData).catch(console.error);
                } else {
                    navigator.clipboard.writeText(shareData.url).then(() => {
                        ToastManager.show('success', 'Demo link copied to clipboard! ');
                    }).catch(() => {
                        this.showShareModal(shareData);
                    });
                }
            }
            
            showShareModal(shareData) {
                ModalManager.show({
                    title: ' Share This Voice Demo',
                    content: `
                        <div class="space-y-6">
                            <p class="text-gray-700 text-lg">Share this voice demo with colleagues, clients, or friends:</p>
                            
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Demo Link:</label>
                                <input type="text" value="${shareData.url}" readonly 
                                       class="w-full p-3 text-sm border border-gray-300 rounded-lg bg-white font-mono" 
                                       id="share-url" onclick="this.select()">
                            </div>
                            
                            <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
                                <button onclick="document.getElementById('share-url').select(); document.execCommand('copy'); window.ToastManager.show('success', 'Link copied!');" 
                                        class="flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg transition-colors font-medium">
                                    <i class="fas fa-copy mr-2"></i> Copy Link
                                </button>
                                <button onclick="window.open('mailto:?subject=${encodeURIComponent(shareData.title)}&body=${encodeURIComponent(shareData.text + '\\n\\n' + shareData.url)}', '_blank')" 
                                        class="flex items-center justify-center bg-green-600 hover:bg-green-700 text-white px-4 py-3 rounded-lg transition-colors font-medium">
                                    <i class="fas fa-envelope mr-2"></i> Email
                                </button>
                                <button onclick="window.open('https://twitter.com/intent/tweet?text=${encodeURIComponent(shareData.text)}&url=${encodeURIComponent(shareData.url)}', '_blank')" 
                                        class="flex items-center justify-center bg-blue-400 hover:bg-blue-500 text-white px-4 py-3 rounded-lg transition-colors font-medium">
                                    <i class="fab fa-twitter mr-2"></i> Tweet
                                </button>
                            </div>
                        </div>
                    `,
                    actions: [
                        {
                            text: 'Close',
                            class: 'bg-gray-200 hover:bg-gray-300 text-gray-800 px-6 py-3',
                            action: 'close'
                        }
                    ]
                });
            }
            
            showPreviewLimitReached() {
                ModalManager.show({
                    title: ' 60-Second Preview Limit Reached',
                    content: `
                        <div class="space-y-6">
                            <div class="bg-red-50 border-l-4 border-red-400 p-5 rounded-r-xl">
                                <div class="flex items-start">
                                    <i class="fas fa-clock text-red-500 text-xl mt-1 mr-4"></i>
                                    <div>
                                        <h5 class="font-bold text-red-800 text-lg mb-2">Preview Time Complete</h5>
                                        <p class="text-red-700">
                                            You've reached the ${this.previewLimit}-second preview limit for this demo. This protects the artist's 
                                            intellectual property while giving you an excellent sense of voice quality and delivery style.
                                        </p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-xl border border-blue-200">
                                <h5 class="font-bold text-blue-800 text-lg mb-4"> Want to Hear More?</h5>
                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                    <div>
                                        <h6 class="font-semibold text-blue-700 mb-2">Full Audio Includes:</h6>
                                        <ul class="text-blue-600 space-y-1 text-sm">
                                            <li> Complete ${this.tracks[this.currentTrack]?.duration || 'full'} recording</li>
                                            <li> Multiple takes and variations</li>
                                            <li> Professional editing and mastering</li>
                                            <li> Multiple file formats</li>
                                        </ul>
                                    </div>
                                    <div>
                                        <h6 class="font-semibold text-purple-700 mb-2">Licensing Options:</h6>
                                        <ul class="text-purple-600 space-y-1 text-sm">
                                            <li> Commercial usage rights</li>
                                            <li> Broadcast and media licensing</li>
                                            <li> Custom recording services</li>
                                            <li> Ongoing project support</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `,
                    actions: [
                        {
                            text: ' Contact for Full Version',
                            class: 'bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-6 py-3 font-semibold',
                            action: () => { ModalManager.close(); this.showContactOptions(); }
                        },
                        {
                            text: ' Try Another Demo',
                            class: 'bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 font-semibold',
                            action: () => { this.nextTrack(); ModalManager.close(); }
                        },
                        {
                            text: 'Close',
                            class: 'bg-gray-200 hover:bg-gray-300 text-gray-800 px-6 py-3',
                            action: 'close'
                        }
                    ]
                });
            }
            
            // Event handlers
            onLoadStart() {
                this.setLoading(true);
            }
            
            onCanPlay() {
                this.setLoading(false);
                console.log(' Audio ready to play');
            }
            
            onLoadedMetadata() {
                const duration = Math.min(this.elements.audio.duration, this.previewLimit);
                this.elements.totalTimeEl.textContent = Utils.formatTime(duration);
            }
            
            onTimeUpdate() {
                if (!this.elements.audio.duration) return;
                
                const currentTime = this.elements.audio.currentTime;
                const duration = Math.min(this.elements.audio.duration, this.previewLimit);
                
                if (currentTime >= this.previewLimit && !this.limitReached) {
                    this.limitReached = true;
                    this.elements.audio.pause();
                    setTimeout(() => this.showPreviewLimitReached(), 500);
                    return;
                }
                
                const progress = (currentTime / duration) * 100;
                this.elements.progressBar.style.width = `${Math.min(progress, 100)}%`;
                this.elements.currentTimeEl.textContent = Utils.formatTime(currentTime);
                
                if (currentTime > this.previewLimit - 10) {
                    this.elements.progressBar.style.background = 'linear-gradient(to right, #ef4444, #f87171)';
                } else {
                    this.elements.progressBar.style.background = 'linear-gradient(to right, #8b5cf6, #ec4899)';
                }
            }
            
            onEnded() {
                if (!this.limitReached) {
                    setTimeout(() => this.nextTrack(), 1000);
                }
            }
            
            onError(error) {
                console.error(' Audio error:', error);
                this.setLoading(false);
                ToastManager.show('error', 'Audio playback error. Please refresh and try again.');
            }
            
            onPlay() {
                this.isPlaying = true;
                AppState.isPlaying = true;
                this.elements.playPauseIcon.className = 'fas fa-pause text-2xl';
                this.animateWaveform(true);
            }
            
            onPause() {
                this.isPlaying = false;
                AppState.isPlaying = false;
                this.elements.playPauseIcon.className = 'fas fa-play text-2xl';
                this.animateWaveform(false);
            }
            
            // UI Updates
            updateTrackInfo(track) {
                this.elements.currentTrackTitle.textContent = track.title;
                this.elements.currentTrackDescription.textContent = track.description;
                this.elements.trackLanguage.textContent = track.language;
                this.elements.trackType.textContent = track.type;
                this.elements.currentTrackMeta.classList.remove('hidden');
                this.updateUI();
            }
            
            updateActiveCard() {
                this.tracks.forEach(track => {
                    track.element.classList.remove('playing');
                });
                
                if (this.tracks[this.currentTrack]) {
                    this.tracks[this.currentTrack].element.classList.add('playing');
                }
            }
            
            updateUI() {
                const hasTrack = this.tracks.length > 0 && this.tracks[this.currentTrack];
                
                this.elements.playPauseBtn.disabled = !hasTrack || this.isLoading;
                this.elements.prevBtn.disabled = this.tracks.length <= 1;
                this.elements.nextBtn.disabled = this.tracks.length <= 1;
                this.elements.contactBtn.disabled = !hasTrack;
                this.elements.infoBtn.disabled = !hasTrack;
                this.elements.shareBtn.disabled = !hasTrack;
            }
            
            setLoading(loading) {
                this.isLoading = loading;
                
                if (loading) {
                    this.elements.playPauseBtn.classList.add('loading');
                    this.elements.playPauseIcon.className = 'fas fa-spinner fa-spin text-2xl';
                } else {
                    this.elements.playPauseBtn.classList.remove('loading');
                    this.elements.playPauseIcon.className = this.isPlaying ? 'fas fa-pause text-2xl' : 'fas fa-play text-2xl';
                }
                
                this.updateUI();
            }
            
            animateWaveform(animate) {
                this.elements.waveformBars.forEach(bar => {
                    bar.style.animationPlayState = animate ? 'running' : 'paused';
                });
            }
        }

        // Loading Manager
        class LoadingManager {
            static show(message = 'Loading...') {
                const loadingEl = Utils.getElement('#app-loading');
                if (loadingEl) {
                    loadingEl.querySelector('p').textContent = message;
                    loadingEl.style.display = 'flex';
                }
            }

            static hide() {
                const loadingEl = Utils.getElement('#app-loading');
                if (loadingEl) {
                    loadingEl.style.opacity = '0';
                    setTimeout(() => {
                        loadingEl.style.display = 'none';
                        document.body.classList.remove('loading');
                    }, 300);
                }
            }

            static setProgress(percent, message) {
                this.show(message);
                // Could add progress bar here if needed
            }
        }

        // Performance Monitor
        class PerformanceMonitor {
            constructor() {
                this.metrics = {};
                this.startTime = performance.now();
                this.observePerformance();
            }

            observePerformance() {
                // Core Web Vitals
                if ('PerformanceObserver' in window) {
                    // Largest Contentful Paint
                    new PerformanceObserver((list) => {
                        const entries = list.getEntries();
                        const lastEntry = entries[entries.length - 1];
                        this.metrics.lcp = lastEntry.startTime;
                        console.log(' LCP:', Math.round(lastEntry.startTime), 'ms');
                    }).observe({ entryTypes: ['largest-contentful-paint'] });

                                     // First Input Delay
                    new PerformanceObserver((list) => {
                        const entries = list.getEntries();
                        entries.forEach(entry => {
                            this.metrics.fid = entry.processingStart - entry.startTime;
                            console.log(' FID:', Math.round(entry.processingStart - entry.startTime), 'ms');
                        });
                    }).observe({ entryTypes: ['first-input'] });

                    // Cumulative Layout Shift
                    new PerformanceObserver((list) => {
                        let cumulativeScore = 0;
                        const entries = list.getEntries();
                        entries.forEach(entry => {
                            if (!entry.hadRecentInput) {
                                cumulativeScore += entry.value;
                            }
                        });
                        this.metrics.cls = cumulativeScore;
                        console.log(' CLS:', cumulativeScore.toFixed(4));
                    }).observe({ entryTypes: ['layout-shift'] });
                }

                // Custom metrics
                this.trackCustomMetrics();
            }

            trackCustomMetrics() {
                // Page load time
                window.addEventListener('load', () => {
                    this.metrics.pageLoadTime = performance.now() - this.startTime;
                    console.log(' Page Load Time:', Math.round(this.metrics.pageLoadTime), 'ms');
                });

                // DOM content loaded
                document.addEventListener('DOMContentLoaded', () => {
                    this.metrics.domContentLoaded = performance.now() - this.startTime;
                    console.log(' DOM Content Loaded:', Math.round(this.metrics.domContentLoaded), 'ms');
                });
            }

            getMetrics() {
                return {
                    ...this.metrics,
                    timestamp: Date.now(),
                    userAgent: navigator.userAgent,
                    viewport: {
                        width: window.innerWidth,
                        height: window.innerHeight
                    },
                    connection: navigator.connection ? {
                        effectiveType: navigator.connection.effectiveType,
                        downlink: navigator.connection.downlink,
                        rtt: navigator.connection.rtt
                    } : null
                };
            }

            sendMetrics() {
                if (CONFIG.DEBUG) return;

                const metrics = this.getMetrics();
                
                // Send to analytics endpoint (implement your own)
                fetch(CONFIG.ANALYTICS_ENDPOINT, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        type: 'performance',
                        data: metrics,
                        page: 'voice-demos',
                        timestamp: Date.now()
                    })
                }).catch(error => {
                    console.warn(' Failed to send metrics:', error);
                });
            }
        }

        // Error Handler
        class ErrorHandler {
            constructor() {
                this.errors = [];
                this.setupGlobalHandlers();
            }

            setupGlobalHandlers() {
                // JavaScript errors
                window.addEventListener('error', (event) => {
                    this.handleError({
                        type: 'javascript',
                        message: event.message,
                        filename: event.filename,
                        lineno: event.lineno,
                        colno: event.colno,
                        stack: event.error?.stack,
                        timestamp: Date.now()
                    });
                });

                // Promise rejections
                window.addEventListener('unhandledrejection', (event) => {
                    this.handleError({
                        type: 'promise_rejection',
                        message: event.reason?.message || 'Unhandled promise rejection',
                        stack: event.reason?.stack,
                        timestamp: Date.now()
                    });
                });

                // Resource loading errors
                window.addEventListener('error', (event) => {
                    if (event.target !== window && event.target.tagName) {
                        this.handleError({
                            type: 'resource',
                            message: `Failed to load ${event.target.tagName}: ${event.target.src || event.target.href}`,
                            element: event.target.tagName,
                            url: event.target.src || event.target.href,
                            timestamp: Date.now()
                        });
                    }
                }, true);
            }

            handleError(error) {
                this.errors.push(error);
                
                if (CONFIG.DEBUG) {
                    console.error(' Error captured:', error);
                }

                // Show user-friendly message for critical errors
                if (error.type === 'javascript' && error.message.includes('audio')) {
                    ToastManager.show('warning', 'Audio playback issue detected. Please refresh the page if problems persist.');
                } else if (error.type === 'resource') {
                    ToastManager.show('warning', 'Some resources failed to load. Please check your connection.');
                }

                // Send to error tracking service
                this.reportError(error);
            }

            reportError(error) {
                if (CONFIG.DEBUG || this.errors.length > 50) return;

                // Implement your error reporting service here
                fetch(`${CONFIG.API_BASE_URL}/errors`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        ...error,
                        url: window.location.href,
                        userAgent: navigator.userAgent,
                        timestamp: Date.now()
                    })
                }).catch(() => {
                    // Fail silently for error reporting
                });
            }

            getErrors() {
                return this.errors;
            }

            clearErrors() {
                this.errors = [];
            }
        }

        // Main Application Class
        class VoiceDemoApp {
            constructor() {
                this.version = CONFIG.APP_VERSION;
                this.startTime = performance.now();
                this.components = {};
                
                console.log(` ${CONFIG.APP_NAME} v${this.version} initializing...`);
                
                this.initialize();
            }

            async initialize() {
                try {
                    LoadingManager.show('Initializing application...');
                    
                    // Initialize core systems
                    this.setupGlobalRefs();
                    this.initializeErrorHandling();
                    this.initializePerformanceMonitoring();
                    
                    LoadingManager.setProgress(20, 'Loading user preferences...');
                    await this.loadUserPreferences();
                    
                    LoadingManager.setProgress(40, 'Initializing interface...');
                    await this.initializeUI();
                    
                    LoadingManager.setProgress(60, 'Setting up voice player...');
                    await this.initializeVoicePlayer();
                    
                    LoadingManager.setProgress(80, 'Finalizing setup...');
                    await this.finalizeInitialization();
                    
                    LoadingManager.setProgress(100, 'Ready!');
                    await Utils.delay(500);
                    
                    this.onInitializationComplete();
                    
                } catch (error) {
                    console.error(' Application initialization failed:', error);
                    this.handleInitializationError(error);
                }
            }

            setupGlobalRefs() {
                // Make managers globally available
                window.ToastManager = new ToastManager();
                window.ModalManager = ModalManager;
                window.Utils = Utils;
                window.CONFIG = CONFIG;
                window.AppState = AppState;
            }

            initializeErrorHandling() {
                this.components.errorHandler = new ErrorHandler();
                console.log(' Error handling initialized');
            }

            initializePerformanceMonitoring() {
                this.components.performanceMonitor = new PerformanceMonitor();
                console.log(' Performance monitoring initialized');
            }

            async loadUserPreferences() {
                // Load saved preferences
                const savedVolume = Utils.storage.get('voice_player_volume', 0.8);
                const savedTheme = Utils.storage.get('user_theme', 'light');
                
                AppState.volume = savedVolume;
                AppState.currentTheme = savedTheme;
                
                console.log(' User preferences loaded');
            }

            async initializeUI() {
                // Initialize navigation
                this.components.navigation = new NavigationManager();
                
                // Initialize AOS animations
                if (typeof AOS !== 'undefined') {
                    AOS.init({
                        duration: 800,
                        easing: 'ease-out-cubic',
                        once: true,
                        offset: 50,
                        disable: window.matchMedia('(prefers-reduced-motion: reduce)').matches
                    });
                }
                
                // Set up intersection observer for animations
                this.setupIntersectionObserver();
                
                console.log(' UI components initialized');
            }

            async initializeVoicePlayer() {
                this.components.voicePlayer = new EnhancedVoiceDemoPlayer();
                console.log(' Voice player initialized');
            }

            async finalizeInitialization() {
                // Set up additional event listeners
                this.setupEventListeners();
                
                // Check for URL hash to auto-play specific demo
                this.handleInitialHash();
                
                // Set up service worker if available
                this.registerServiceWorker();
                
                console.log(' Finalization complete');
            }

            setupIntersectionObserver() {
                if ('IntersectionObserver' in window) {
                    const observer = new IntersectionObserver((entries) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                entry.target.classList.add('animate-fade-in');
                            }
                        });
                    }, {
                        threshold: 0.1,
                        rootMargin: '0px 0px -50px 0px'
                    });

                    // Observe elements for animation
                    document.querySelectorAll('.voice-demo-card, .animate-on-scroll').forEach(el => {
                        observer.observe(el);
                    });

                    AppState.observers.set('intersection', observer);
                }
            }

            setupEventListeners() {
                // Visibility change
                document.addEventListener('visibilitychange', () => {
                    if (document.hidden && AppState.isPlaying) {
                        // Optionally pause when tab becomes hidden
                        console.log(' Tab hidden, audio continues playing');
                    }
                });

                // Online/offline status
                window.addEventListener('online', () => {
                    ToastManager.show('success', 'Connection restored');
                });

                window.addEventListener('offline', () => {
                    ToastManager.show('warning', 'Connection lost. Some features may be limited.');
                });

                // Keyboard shortcuts
                document.addEventListener('keydown', (e) => {
                    // Global keyboard shortcuts
                    if (e.ctrlKey || e.metaKey) {
                        switch (e.key) {
                            case '/':
                                e.preventDefault();
                                // Focus search if available
                                break;
                            case 'k':
                                e.preventDefault();
                                this.components.voicePlayer?.showContactOptions();
                                break;
                        }
                    }
                });
            }

            handleInitialHash() {
                const hash = window.location.hash;
                if (hash.startsWith('#demo-')) {
                    const demoIndex = parseInt(hash.replace('#demo-', ''));
                    if (!isNaN(demoIndex)) {
                        setTimeout(() => {
                            this.components.voicePlayer?.selectTrack(demoIndex);
                        }, 1000);
                    }
                }
            }

            registerServiceWorker() {
                if ('serviceWorker' in navigator && !CONFIG.DEBUG) {
                    navigator.serviceWorker.register('/sw.js')
                        .then(registration => {
                            console.log(' Service Worker registered:', registration);
                        })
                        .catch(error => {
                            console.log(' Service Worker registration failed:', error);
                        });
                }
            }

            onInitializationComplete() {
                AppState.isInitialized = true;
                AppState.isLoading = false;
                
                const initTime = performance.now() - this.startTime;
                console.log(` ${CONFIG.APP_NAME} initialized in ${Math.round(initTime)}ms`);
                
                LoadingManager.hide();
                
                // Show welcome message
                setTimeout(() => {
                    ToastManager.show('success', `Welcome to ${CONFIG.APP_NAME}! `, 3000, {
                        description: 'Experience professional voice demos with enhanced playback controls.'
                    });
                }, 500);

                // Send initialization metrics
                this.components.performanceMonitor?.sendMetrics();
            }

            handleInitializationError(error) {
                console.error(' Critical initialization error:', error);
                
                LoadingManager.hide();
                
                // Show fallback interface
                document.body.innerHTML += `
                    <div class="fixed inset-0 bg-red-50 flex items-center justify-center z-50">
                        <div class="max-w-md mx-auto text-center p-8">
                            <div class="text-6xl mb-6"></div>
                            <h1 class="text-2xl font-bold text-red-800 mb-4">Application Error</h1>
                            <p class="text-red-600 mb-6">
                                We're sorry, but the voice demo player failed to initialize properly. 
                                This might be due to a network issue or browser compatibility.
                            </p>
                            <div class="space-y-3">
                                <button onclick="window.location.reload()" 
                                        class="w-full bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                                    <i class="fas fa-refresh mr-2"></i> Refresh Page
                                </button>
                                <a href="mailto:${CONFIG.CONTACT_EMAIL}" 
                                   class="block w-full bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                                    <i class="fas fa-envelope mr-2"></i> Report Issue
                                </a>
                            </div>
                        </div>
                    </div>
                `;
            }

            // Public API methods
            getState() {
                return AppState;
            }

            getMetrics() {
                return this.components.performanceMonitor?.getMetrics() || {};
            }

            getErrors() {
                return this.components.errorHandler?.getErrors() || [];
            }

            restart() {
                window.location.reload();
            }
        }

        // Initialize application when DOM is ready
        function initializeApp() {
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', () => {
                    new VoiceDemoApp();
                });
            } else {
                new VoiceDemoApp();
            }
        }

        // Auto-initialize
        initializeApp();

        // Expose app for debugging
        if (CONFIG.DEBUG) {
            window.VoiceDemoApp = VoiceDemoApp;
            window.AppState = AppState;
            window.CONFIG = CONFIG;
            
            console.log(' Debug mode enabled. Global objects available:', {
                VoiceDemoApp,
                AppState,
                CONFIG,
                Utils
            });
        }

        // PWA Installation
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            
            // Show install button
            const installBtn = document.createElement('button');
            installBtn.textContent = ' Install App';
            installBtn.className = 'fixed bottom-4 right-4 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg shadow-lg z-50 transition-all hover:scale-105';
            installBtn.onclick = async () => {
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    const { outcome } = await deferredPrompt.userChoice;
                    console.log(`PWA install outcome: ${outcome}`);
                    deferredPrompt = null;
                    installBtn.remove();
                }
            };
            
            document.body.appendChild(installBtn);
            
            // Auto-hide after 10 seconds
            setTimeout(() => {
                if (installBtn.parentNode) {
                    installBtn.remove();
                }
            }, 10000);
        });

        // Analytics helper (implement with your analytics service)
        function trackEvent(eventName, properties = {}) {
            if (CONFIG.DEBUG) {
                console.log(' Analytics Event:', eventName, properties);
                return;
            }
            
            // Implement your analytics tracking here
            // Example: gtag('event', eventName, properties);
        }

        // Export for module systems
        if (typeof module !== 'undefined' && module.exports) {
            module.exports = { VoiceDemoApp, Utils, CONFIG };
        }

    </script>
</body>
</html>


l
